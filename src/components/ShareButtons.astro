---
interface Props {
	title: string;
	url: string;
}

const { title, url } = Astro.props;
const encodedTitle = encodeURIComponent(title);
const encodedUrl = encodeURIComponent(url);
---

<div class="share-buttons">
	<span class="share-label">Share this:</span>
	<div class="share-links">
		<a 
			href={`https://twitter.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}`}
			target="_blank" 
			rel="noopener noreferrer"
			class="share-btn twitter"
			title="Share on X/Twitter"
		>
			<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
				<path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
			</svg>
		</a>
		<a 
			href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`}
			target="_blank" 
			rel="noopener noreferrer"
			class="share-btn linkedin"
			title="Share on LinkedIn"
		>
			<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
				<path d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.3 6.5a1.78 1.78 0 01-1.8 1.75zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.74 1.74 0 0013 14.19a.66.66 0 000 .14V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.36.86 3.36 3.66z"/>
			</svg>
		</a>
		<a 
			href={`https://bsky.app/intent/compose?text=${encodedTitle}%20${encodedUrl}`}
			target="_blank" 
			rel="noopener noreferrer"
			class="share-btn bluesky"
			title="Share on Bluesky"
		>
			<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
				<path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 01-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8z"/>
			</svg>
		</a>
		<button 
			class="share-btn copy-link" 
			data-url={url}
			title="Copy link"
		>
			<!-- Heroicon: link -->
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="18" height="18" fill="currentColor" aria-hidden="true">
				<path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z" />
				<path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z" />
			</svg>
		</button>
	</div>
	<span class="copy-feedback">Copied!</span>
</div>

<style>
	.share-buttons {
		display: flex;
		align-items: center;
		gap: 0.75em;
		margin: 2em 0;
		padding: 1em 0;
		border-top: 1px solid rgb(var(--gray-light), 0.3);
	}
	.share-label {
		font-size: 0.875rem;
		color: rgb(var(--gray));
	}
	.share-links {
		display: flex;
		gap: 0.5em;
	}
	.share-btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 36px;
		height: 36px;
		border-radius: 8px;
		text-decoration: none;
		transition: transform 0.15s, opacity 0.15s, background 0.15s, color 0.15s, border-color 0.15s;
		border: 1px solid rgb(var(--gray-light), 0.3);
		background: transparent;
		color: rgb(var(--gray-dark));
		cursor: pointer;
	}
	.share-btn:hover {
		transform: translateY(-2px);
	}
	.twitter:hover { background: #000; color: white; border-color: #000; }
	.linkedin:hover { background: #0077b5; color: white; border-color: #0077b5; }
	.bluesky:hover { background: #0085ff; color: white; border-color: #0085ff; }
	.copy-link:hover { background: rgb(var(--accent)); color: white; border-color: rgb(var(--accent)); }
	
	.copy-feedback {
		font-size: 0.8rem;
		color: rgb(var(--accent));
		opacity: 0;
		transition: opacity 0.2s;
	}
	.copy-feedback.show {
		opacity: 1;
	}
</style>

<script>
	document.querySelectorAll('.copy-link').forEach(btn => {
		btn.addEventListener('click', async () => {
			const url = btn.getAttribute('data-url');
			if (url) {
				await navigator.clipboard.writeText(url);
				const feedback = btn.closest('.share-buttons')?.querySelector('.copy-feedback');
				if (feedback) {
					feedback.classList.add('show');
					setTimeout(() => feedback.classList.remove('show'), 2000);
				}
			}
		});
	});
</script>
