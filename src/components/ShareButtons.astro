---
interface Props {
	title: string;
	url: string;
}

const { title, url } = Astro.props;
const encodedTitle = encodeURIComponent(title);
const encodedUrl = encodeURIComponent(url);
---

<div class="share-buttons">
	<span class="share-label">Share this:</span>
	<div class="share-links">
		<a 
			href={`https://twitter.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}`}
			target="_blank" 
			rel="noopener noreferrer"
			class="share-btn twitter"
			title="Share on X/Twitter"
		>
			ùïè
		</a>
		<a 
			href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`}
			target="_blank" 
			rel="noopener noreferrer"
			class="share-btn linkedin"
			title="Share on LinkedIn"
		>
			in
		</a>
		<a 
			href={`https://bsky.app/intent/compose?text=${encodedTitle}%20${encodedUrl}`}
			target="_blank" 
			rel="noopener noreferrer"
			class="share-btn bluesky"
			title="Share on Bluesky"
		>
			ü¶ã
		</a>
		<button 
			class="share-btn copy-link" 
			data-url={url}
			title="Copy link"
		>
			üîó
		</button>
	</div>
	<span class="copy-feedback">Copied!</span>
</div>

<style>
	.share-buttons {
		display: flex;
		align-items: center;
		gap: 0.75em;
		margin: 2em 0;
		padding: 1em 0;
		border-top: 1px solid rgb(var(--gray-light), 0.3);
	}
	.share-label {
		font-size: 0.875rem;
		color: rgb(var(--gray));
	}
	.share-links {
		display: flex;
		gap: 0.5em;
	}
	.share-btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 36px;
		height: 36px;
		border-radius: 8px;
		text-decoration: none;
		font-weight: bold;
		font-size: 0.875rem;
		transition: transform 0.15s, opacity 0.15s;
		border: 1px solid rgb(var(--gray-light), 0.3);
		background: transparent;
		color: rgb(var(--gray-dark));
		cursor: pointer;
	}
	.share-btn:hover {
		transform: translateY(-2px);
		opacity: 0.8;
	}
	.twitter:hover { background: #000; color: white; border-color: #000; }
	.linkedin:hover { background: #0077b5; color: white; border-color: #0077b5; }
	.bluesky:hover { background: #0085ff; border-color: #0085ff; }
	.copy-link:hover { background: rgb(var(--accent)); color: white; border-color: rgb(var(--accent)); }
	
	.copy-feedback {
		font-size: 0.8rem;
		color: rgb(var(--accent));
		opacity: 0;
		transition: opacity 0.2s;
	}
	.copy-feedback.show {
		opacity: 1;
	}
</style>

<script>
	document.querySelectorAll('.copy-link').forEach(btn => {
		btn.addEventListener('click', async () => {
			const url = btn.getAttribute('data-url');
			if (url) {
				await navigator.clipboard.writeText(url);
				const feedback = btn.closest('.share-buttons')?.querySelector('.copy-feedback');
				if (feedback) {
					feedback.classList.add('show');
					setTimeout(() => feedback.classList.remove('show'), 2000);
				}
			}
		});
	});
</script>
